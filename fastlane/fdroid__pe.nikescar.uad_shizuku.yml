AntiFeatures:
  NonFreeNet:
    en-US: Optional VirusTotal and Hybrid Analysis API integration for app scanning.
Categories:
  - Security
  - System
License: GPL-3.0-or-later
SourceCode: https://github.com/nikescar/uad-shizuku
IssueTracker: https://github.com/nikescar/uad-shizuku/issues

AutoName: UAD-Shizuku
Description: |-
  Debloat, scan virus, and install FOSS apps on Android.

  UAD-Shizuku uses debloat app info from UAD-NG (Universal Android Debloater Next Generation).

  Features:
  * Debloat: Remove bloatware using UAD-NG lists and Shizuku (adb-wireless)
  * Scan: Scan apps with VirusTotal and Hybrid Analysis
  * Install: Browse and install open source apps using OFFA and FMHY lists

  Requires Shizuku to be installed and running for debloat functionality.

RepoType: git
Repo: https://github.com/nikescar/uad-shizuku.git

Builds:
  - versionName: 0.0.10
    versionCode: 290636626
    commit: b74d1dad483fcd587fa9744685c6385fc368f136
    subdir: mobile
    sudo:
      - apt-get update
      - apt-get install -y make gcc libc-dev pkg-config libunwind-dev clang llvm
    gradle:
      - yes
    output: app/build/outputs/apk/release/app-release-unsigned.apk
    srclibs:
      - rustup@1.27.1
    prebuild:
      - sed -i '/maven.rikka.app/d' settings.gradle
      - sed -i -e '/if (System.getenv("ANDROID_SPLIT_BUILD")/,/^    }/d' app/build.gradle
      - sed -i '/APPLICATION_VERSION_CODE/s/def appVersionCode.*/def appVersionCode
        = "$$VERCODE$$"/' app/build.gradle
      - sed -i '/APPLICATION_VERSION_NAME/s/def appVersionName.*/def appVersionName
        = "$$VERSION$$"/' app/build.gradle
      - $$rustup$$/rustup-init.sh -y --default-toolchain 1.90.0 --target aarch64-linux-android
        armv7-linux-androideabi i686-linux-android x86_64-linux-android
    scanignore:
      - mobile/Cargo.toml
      - Cargo.toml
    build:
      - source "$HOME/.cargo/env"
      - cargo install cargo-ndk --locked
      - cargo ndk -t armeabi-v7a -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t arm64-v8a -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t x86 -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t x86_64 -o app/src/main/jniLibs/ build --release --lib
    ndk: 28.2.13676358
    postbuild:
      - echo "=== PWD ===" && pwd
      - echo "=== APKs found ===" && find . -name "*.apk" -type f
      - echo "=== app/build/outputs ===" && ls -alR app/build/outputs || echo "directory
        not found"

AutoUpdateMode: Version v%v
UpdateCheckMode: HTTP
UpdateCheckData: https://api.github.com/repos/nikescar/uad-shizuku/releases/latest|"id":\s*(\d+)|.|"tag_name":\s*"v([^"]+)"
CurrentVersion: 0.0.10
CurrentVersionCode: 290636626
